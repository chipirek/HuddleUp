<div class="navbar navbar-inverse">
<div class="navbar-inner">
<div class="container-fluid">


<a class="brand" href="#">
  <small><i class="icon-check"></i> HuddleUp</small>
</a>

<%= render :partial => '/projects/top_nav', :locals => { :post => 'hello' } %>

</div>
<!--/.container-fluid-->
</div>
<!--/.navbar-inner-->
</div>


<div class="container-fluid" id="main-container">
<a href="#" id="menu-toggler"><span></span></a><!-- menu toggler -->

<%= render :partial => '/projects/side_nav_1', :locals => {:component => 'milestones', :project_id => @project.id } %>


<div id="main-content" class="clearfix">

  <div id="breadcrumbs">
    <ul class="breadcrumb">
      <li><i class="icon-home"></i>
        <a href="/projects">Home</a><span class="divider"><i class="icon-angle-right"></i></span></li>
      <li><a href="/projects">Projects</a><span class="divider"><i class="icon-angle-right"></i></span></li>
      <li>
        <a href="/projects/<%= @project.id %>"> <%= @project.name %></a><span class="divider"><i class="icon-angle-right"></i></span>
      </li>
      <li class='active'> Milestones</li>
    </ul>
    <!--.breadcrumb-->

    <div id="nav-search">
      <form class="form-search">
            <span class="input-icon">
                <input autocomplete="off" id="nav-search-input" type="text" class="input-small search-query" placeholder="Search ..."/>
                <i id="nav-search-icon" class="icon-search"></i>
            </span>
      </form>
    </div>
    <!--#nav-search-->
  </div>
  <!--#breadcrumbs-->

  <div id="page-content" class="clearfix">

    <div class="page-header position-relative">
      <h1><i class="icon-group"></i> Milestones for <i><%= @project.name %></i></h1>
    </div>
    <!--/page-header-->


    <div class="row-fluid">

      <!-- PAGE CONTENT BEGINS HERE -->

      <div class="space-6"></div>
      <div class="row-fluid">

        <div class="span12">
          <div class="widget-box transparent">

            <div class="widget-body">
              <div class="widget-main padding-5">
                <div class="tab-content padding-8">

                  <!-- BEGIN -->

                  <% if flash[:notice] %>
                      <div class='alert alert-block alert-success'>
                        <button type="button" class="close" data-dismiss="alert"><i class="icon-remove"></i></button>
                        <strong><i class="icon-ok"></i> <%= flash[:notice] %></strong>
                      </div>
                  <% end %>

                  <div style="margin-bottom: 50px;">
                  <table id="table_report" class="table table-striped table-bordered table-hover">
                    <thead>
                    <tr>
                      <th>Milestone</th>
                      <th class="hidden-phone"><i class="icon-time hidden-phone"></i> Date</th>
                      <th class="hidden-480">Progress</th>
                      <th></th>
                    </tr>
                    </thead>

                    <tbody>

                    <% @milestones.each do |milestone| %>

                        <tr>

                          <td>
                            <a href="/projects/<%= @project.id %>/milestones/<%= milestone.id %>"><%= milestone.subject %></a>
                          </td>
                          <td class='hidden-phone'><%= milestone.event_date.strftime('%m/%d/%Y') %></td>

                          <td>
                            <div class="progress" data-percent="25%">
                              <div class="bar" style="width:25%;"></div>
                            </div>
                          </td>

                          <td>
                            <a href="/projects/<%= @project.id %>/milestones/<%= milestone.id %>" class="tooltip-error" data-confirm="Are you sure you want to delete <%= milestone.subject %>?" data-method="delete" data-placement="left" data-rel="tooltip" rel="nofollow" title="Delete">
                              <span class='red'><i class='icon-trash'></i></span>
                            </a> |
                            <a href="/projects/<%= @project.id %>/milestones/<%= milestone.id %>/edit" class="tooltip-edit" data-rel="tooltip" title="Edit" data-placement="left"><span class="blue"><i class="icon-edit"></i></span></a>
                          </td>

                        </tr>

                    <% end %>

                    </tbody>
                  </table>

                  </div>
                  <!-- END -->

                </div>
              </div>
              <!--/widget-main-->
            </div>
            <!--/widget-body-->


          </div>
          <!--/widget-box-->
        </div>
        <!--/span-->

        <a class='btn btn-success' href="/projects/<%= @project.id %>/milestones/new">Create a new milestone</a>
      </div>
      <!--/row-->

      <!-- PAGE CONTENT ENDS HERE -->


    </div>
    <!--/row-->

  </div>
  <!--/#page-content-->


</div>
<!-- #main-content -->


</div>
<!--/.fluid-container#main-container-->


<a href="#" id="btn-scroll-up" class="btn btn-small btn-inverse">
  <i class="icon-double-angle-up icon-only"></i>
</a>


<!-- inline scripts related to this page -->

<script type="text/javascript" src="/assets/js/jquery.easy-pie-chart.min.js"></script>
<script type="text/javascript">

    $(function () {

        $('.dialogs,.comments').slimScroll({
            height: '300px'
        });

        $('.date-picker').datepicker();

        $(".chzn-select").chosen();

        var oldie = $.browser.msie && $.browser.version < 9;

        var $tooltip = $("<div class='tooltip top in' style='display:none;'><div class='tooltip-inner'></div></div>").appendTo('body');
        $('[data-rel="tooltip"]').tooltip();

        $('.easy-pie-chart.percentage').each(function () {
            var $box = $(this).closest('.infobox');
            var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
            var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
            var size = parseInt($(this).data('size')) || 50;
            $(this).easyPieChart({
                barColor: barColor,
                trackColor: trackColor,
                scaleColor: false,
                lineCap: 'butt',
                lineWidth: parseInt(size / 10),
                animate: oldie ? false : 1000,
                size: size
            });
        })
    });

</script>
